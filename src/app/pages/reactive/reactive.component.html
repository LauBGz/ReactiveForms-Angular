<h4>Formularios <small> reactivos </small></h4>
<hr>
<form autocomplete="off" [formGroup]="forma" (ngSubmit)="guardar()">
    <!-- nombre -->
    <div class="form-group row">
      <label class="col-2 col-form-label">Nombre</label>
      <div class="col">

        <input class="form-control"
               type="text"
               placeholder="Nombre"
               formControlName="nombre"
               [class.is-invalid]="nombreNoValido">
            <small *ngIf="nombreNoValido" class="text-danger">Introduzca al menos 5 letras</small>

      </div>
    </div>
    <!-- fin nombre -->
    <!-- apellido -->
    <div class="form-group row">
      <label class="col-2 col-form-label">Apellido</label>
      <div class="col">

        <input class="form-control"
               type="text"
               placeholder="Apellido"
               formControlName="apellido"
               [class.is-invalid]="apellidoNoValido">
            <small *ngIf="apellidoNoValido" class="text-danger">Introduzca un apellido válido</small>
      
        </div>
    </div>
    <!-- fin apellido -->
    <!-- correo -->
    <div class="form-group row">
        <label class="col-2 col-form-label">Correo</label>
        <div class="col">

        <input class="form-control"
                type="email"
                placeholder="Correo electrónico"
                formControlName="correo"
                [class.is-invalid]="correoNoValido">
                <!-- forma.correo -->
            <small *ngIf="correoNoValido" class="text-danger">Introduzca un correo válido</small>
        
        </div>
    </div>
    <!-- fin correo -->

    <!-- usuario -->
    <div class="form-group row">
        <label class="col-2 col-form-label">Usuario</label>
        <div class="col">

        <input class="form-control"
                type="text"
                placeholder="Nombre de usuario"
                formControlName="usuario"
                [class.is-invalid]="usuarioNoValido">
                <!-- forma.Usuario -->
            <small *ngIf="usuarioNoValido" class="text-danger">El usuario ya existe</small>
        
        </div>
    </div>
    <!-- fin usuario -->

    <!-- contraseña 1 -->
    <div class="form-group row">
        <label class="col-2 col-form-label">Contraseña</label>
        <div class="col">

        <input class="form-control"
                type="password"
                placeholder="Contraseña"
                formControlName="pass1"
                [class.is-invalid]="pass1NoValido">
            <small *ngIf="pass1NoValido" class="text-danger">Introduzca una contraseña válida</small>
        
        </div>
    </div>
    <!-- fin contraseña 1 -->

    <!-- contraseña 2 -->
    <div class="form-group row">
        <label class="col-2 col-form-label">Repita contraseña</label>
        <div class="col">

        <input class="form-control"
                type="password"
                placeholder="Repita contraseña"
                formControlName="pass2"
                [class.is-invalid]="pass2NoValido">
            <small *ngIf="pass2NoValido" class="text-danger">Las contraseñas no coinciden</small>
        
        </div>
    </div>
    <!-- fin contraseña 2 -->

    <!-- Input anidados: en el div contenedor añadimos la referencia formGroupName para que Angular sepa
    que dentro de este objeto van a venir las propiedades distrito y ciudad-->
    <div class="form-group row" formGroupName="direccion">
        <label class="col-2 col-form-label">Dirección</label>
        <div class="form-row col">
            <!-- input distrito -->
            <div class="col">
                
                <input type="text"
                        class="form-control"
                        placeholder="Distrito"
                        formControlName="distrito"             
                        [class.is-invalid]="distritoNoValido">
                     <small *ngIf="distritoNoValido" class="text-danger">Introduzca un distrito válido</small>
            
            </div>
            <!-- input ciudad -->
            <div class="col">
                
                <input type="text"
                        class="form-control"
                        placeholder="Ciudad"
                        formControlName="ciudad"             
                        [class.is-invalid]="ciudadNoValido">
                     <small *ngIf="ciudadNoValido" class="text-danger">Introduzca una ciudad válida</small>
            
            </div>
        </div>
    </div>
    <!-- inputs pasatiempos -->
    <div class="row">
        <label class="col-2 col-form-label">Pasatiempos</label>
        <div class="col">
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th>ID</th>
                        <th>Pasatiempo</th>
                        <th>Borrar</th>
                    </tr>
                </thead>
                <!-- formArrayName se puede poner en otro sitio pero aquí está solo un nivel antes de los
                elementos que queremos duplicar -->
                <tbody formArrayName="pasatiempos">
                    <tr *ngFor="let control of pasatiempos.controls; let i = index">
                        <td>{{i + 1}}</td>
                        <td>
                            <input class="form-control"
                            type="text"
                            [formControlName]="i">
                            <!-- formControlName tiene que ir entre [] porque es un array -->
                        </td>
                        <td>
                            <button class="btn btn-danger"
                                    (click)="borrarPasatiempo(i)">
                                    Borrar</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button  class="btn btn-primary mt-3 mb-5 btn-block"
                    type="button"
                    (click)="agregarPasatiempo()">
                    <!-- Importante!!! Type button para que no lance un submit por defecto -->
                + Agregar
            </button>
        </div>
    </div>
    <!-- fin inputs pasatiempos -->
    <div class="form-group row">
        <label class="col-2 col-form-label">&nbsp;</label>
        <div class="input-group col">
        <button type="submit" class="btn btn-outline-primary btn-block">
            Guardar
        </button>
        </div>
    </div>

</form>


